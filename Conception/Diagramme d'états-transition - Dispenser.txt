http://www.plantuml.com/plantuml/uml/bLNTRfim5BxtKvphALMrxQxIfbhWT2ZKH9WahQR9Gk14rWB936JFrEVeYyqs2U4lJPOhyFb-_1qVdCUYZ5LPPLk4Vdxw1NTttu5nZteHF418iCkdda_GSQckXWkgYuHZtm1U-Om6AmhtWFaJYRYB8ppHpuR0dM118nAohi0Awz8pOGm_4Qkqe6SDHgYhmTF0a3h8hdj87E8jYTkKxmUcg4RNFES7SMPsTvVf8M4wGUGzat3Il3hpPWke8zFMRQTPOjzpQuWDX9UawSfPqgCrhYyzdfO6dOtQ9c5dTeKre5pDCR8pgtHQQr9vrFamnfZGw45Gihg9_A1DCPlTZA_DN3ATUev7Q5Gt1B-CWasY5Gvf9wSvBnO5SzCw5eHZusIqpBXmflj1k8zPTx3jA7NwTG6DRb7i7gx-HZv4zmRwFnpyWDNjOelvLGlRDiDesZNo_LnERRsk3SOW2-gShA6RoykmNCAYC7XjdTMmqdZsImZbkr90N03zZ43_UZSAV0ExB7DPGh8lUIQA8jw8IMzPveTuAzEnSYapeP38Kp1MBSClHyFp_NTosyY309aULGhB5UNVdVhDars-bfl9cDxNezvWh4-oU_N-TX2vLF2d4h0LaCJxKbGAH552-lwsNij4Yho4VIKBI4KMvwbG45UGYKI_6ueI6fZ5IhKpFUed_OVo3m00

@startuml
[*] --> S_INIT : READ_FILE
S_INIT --> S_RUN : E_ALREADY_KNOWN / A_GET_DATA, A_INIT_COUNTERS
S_INIT --> S_WAIT_MESSAGE : E_UNKNOWN / A_SEND_INFOS
S_WAIT_MESSAGE --> S_RUN : E_RECEIVED_MESSAGE / A_INIT_COUNTERS

S_RUN --> S_CHECK_DATA : E_RECEIVED_MESSAGE / A_RESET_TIMER, A_RESET_CPT_MESSAGE
S_CHECK_DATA --> S_CHECK_MESSAGE : E_VALID_DATA / A_SAVE_DATA, A_RESET_CPT_INVALID_MESSAGE
S_CHECK_MESSAGE --> S_RUN : E_NO_MESSAGE / A_SEND_ACK
S_CHECK_MESSAGE --> S_RUN : E_MESSAGE / A_SEND_MESSAGE
S_CHECK_DATA --> S_CHECK_CPT_INVALID_MESSAGE : E_INVALID_DATA / A_INC_CPT_INVALID_MESSAGE
S_CHECK_CPT_INVALID_MESSAGE --> S_CHECK_DATA : E_NEW_MESSAGE
S_CHECK_CPT_INVALID_MESSAGE : A_ASK_NEW_MESSAGE
S_CHECK_CPT_INVALID_MESSAGE --> S_DEFFICIENT : E_MAX_CPT_INVALID_MESSAGE / A_WARN_INVALID_DATA, A_STOP_SENSOR

S_RUN --> S_CHECK_CPT_TIME_SINCE_LAST_MESSAGE : E_TIMER / A_INC_CPT_TIME_SINCE_LAST_MESSAGE
S_CHECK_CPT_TIME_SINCE_LAST_MESSAGE --> S_RUN : E_INF_CPT_TIME_SINCE_LAST_MESSAGE / A_RESET_TIMER
S_CHECK_CPT_TIME_SINCE_LAST_MESSAGE --> S_LOST : E_SUP_CPT_TIME_SINCE_LAST_MESSAGE / A_WARN_LOST, A_STOP_TIMER, A_RESET_CPT_TIME_SINCE_LAST_MESSAGE
S_LOST --> S_CHECK_DATA : E_NEW_MESSAGE / A_RESET_TIMER

S_DEFFICIENT --> [*] : E_DESTROY
S_RUN --> [*] : E_DESTROY
S_LOST --> [*] : E_DESTROY


note as N1
    A_INIT_COUNTERS = 
    init cpt_message, 
    init cpt_invalid_message, 
    init timer
end note

note as N2
    A_SEND_INFOS = 
    give id, 
    send network_config,
end note

note as N3
    A_WARN_INVALID_DATA = 
    prévenir que le capteur est défficient puis demander au mec de le redémarrer
end note
@enduml